<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å¤§å­¦ç”Ÿåƒé¥­é€‰æ‹©å›°éš¾ç—‡æ‹¯æ•‘å™¨</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      /* ä¸»è‰²è°ƒï¼šæ·¡ç²‰è‰²å’Œæ·¡é»„è‰² */
      body {
        background-color: #fff0f5; /* æ·¡ç²‰è‰²èƒŒæ™¯ */
        font-family: "Comic Sans MS", "Marker Felt", "å¾®è½¯é›…é»‘", sans-serif;
      }
      .header {
        background-color: #ffdab9; /* æ·¡é»„è‰²æ ‡é¢˜æ  */
        color: #8b4513; /* æ£•è‰²æ–‡æœ¬ */
        padding: 20px 0;
        border-radius: 0 0 20px 20px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
      }
      .form-container {
        background-color: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
      }
      .result-container {
        display: none;
        background-color: #fff0f5; /* æ·¡ç²‰è‰²ç»“æœå®¹å™¨ */
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
      }
      .progress-container {
        display: none;
        margin: 20px 0;
      }
      .progress-bar {
        background-color: #ffb6c1; /* æ·¡ç²‰è‰²è¿›åº¦æ¡ */
      }
      .funny-icon {
        font-size: 2rem;
        margin: 0 10px;
      }
      .mood-selector img {
        width: 60px;
        height: 60px;
        margin: 5px;
        cursor: pointer;
        transition: all 0.3s;
        border-radius: 50%;
        border: 2px solid #ffdab9; /* æ·¡é»„è‰²è¾¹æ¡† */
      }
      .mood-selector img:hover,
      .mood-selector img.selected {
        transform: scale(1.1);
        box-shadow: 0 0 10px #ffb6c1; /* æ·¡ç²‰è‰²é˜´å½± */
        border: 2px solid #ffb6c1; /* æ·¡ç²‰è‰²è¾¹æ¡† */
      }
      .funny-input {
        border-radius: 50px;
        padding: 10px 20px;
        border: 2px dashed #ffb6c1; /* æ·¡ç²‰è‰²è¾¹æ¡† */
      }
      .funny-btn {
        background-color: #ffb6c1; /* æ·¡ç²‰è‰²æŒ‰é’® */
        color: #8b4513; /* æ£•è‰²æ–‡æœ¬ */
        border: none;
        border-radius: 50px;
        padding: 12px 30px;
        font-weight: bold;
        transition: all 0.3s;
      }
      .funny-btn:hover {
        background-color: #ff69b4; /* äº®ç²‰è‰²æ‚¬åœ */
        transform: scale(1.05);
        color: white;
      }
      .result-title {
        color: #ff69b4; /* äº®ç²‰è‰²æ ‡é¢˜ */
        font-weight: bold;
        margin-bottom: 20px;
      }
      .result-food {
        font-size: 2rem;
        font-weight: bold;
        color: #8b4513; /* æ£•è‰²é£Ÿç‰©åç§° */
        margin: 20px 0;
      }
      .funny-fact {
        font-style: italic;
        color: #666;
        margin-top: 10px;
      }
      .emoji {
        font-size: 1.5rem;
      }

      /* æ”¹è¿›æ»‘å—æ ·å¼ */
      .form-range::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 20px;
        height: 20px;
        background: #ffb6c1; /* æ·¡ç²‰è‰²æ»‘å— */
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.2s;
      }

      .form-range::-webkit-slider-thumb:hover {
        transform: scale(1.2);
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
      }

      .form-range::-moz-range-thumb {
        width: 20px;
        height: 20px;
        background: #ffb6c1; /* æ·¡ç²‰è‰²æ»‘å— */
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.2s;
      }

      .form-range::-moz-range-thumb:hover {
        transform: scale(1.2);
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
      }

      .form-range::-webkit-slider-runnable-track {
        height: 8px;
        background: #ddd;
        border-radius: 4px;
      }

      .form-range::-moz-range-track {
        height: 8px;
        background: #ddd;
        border-radius: 4px;
      }

      .budget-labels {
        display: flex;
        justify-content: space-between;
        margin-top: 5px;
      }

      .budget-label {
        font-size: 0.8rem;
        color: #666;
      }
      /* æ·»åŠ é¥¥é¥¿ç¨‹åº¦æ»‘å—çš„ç‰¹æ®Šæ ·å¼ */
      .hunger-labels {
        margin-top: 5px;
      }
      .hunger-labels span {
        width: 20px;
        text-align: center;
        font-size: 0.8rem;
        color: #666;
      }
      .hunger-text {
        margin-top: -5px;
      }
      .hunger-text small {
        flex: 1;
        text-align: center;
        font-size: 0.8rem;
        color: #ff69b4; /* äº®ç²‰è‰²æ–‡æœ¬ */
      }
      /* ç»“æœæç¤ºæ ·å¼ */
      .result-tip {
        font-weight: bold;
        color: #8b4513; /* æ£•è‰²æç¤ºæ ‡é¢˜ */
        font-style: normal;
      }

      .result-tip-content {
        font-style: italic;
        color: #666;
      }
      /* é€‰ä¸­çš„å¿ƒæƒ…æ˜¾ç¤ºæ ·å¼ */
      #selectedMood {
        margin-top: 10px;
        text-align: center;
        font-weight: bold;
        color: #ff69b4; /* äº®ç²‰è‰² */
      }
      /* èƒ½é‡éœ€æ±‚æ˜¾ç¤ºæ ·å¼ */
      #energyStatus {
        margin-top: 5px;
        font-size: 0.9rem;
        color: #8b4513; /* æ£•è‰² */
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header text-center">
        <h1>
          <span class="emoji">ğŸ¤¯</span> å¤§å­¦ç”Ÿåƒé¥­é€‰æ‹©å›°éš¾ç—‡æ‹¯æ•‘å™¨
          <span class="emoji">ğŸ”</span>
        </h1>
        <p class="lead">è¿˜åœ¨ä¸ºåƒä»€ä¹ˆå‘æ„ï¼Ÿè®©æœ¬ç¥å™¨æ‹¯æ•‘ä½ çš„é€‰æ‹©å›°éš¾ç—‡ï¼</p>
      </div>

      <div class="form-container">
        <h3 class="text-center mb-4">
          <span class="emoji">ğŸ”</span> å‘Šè¯‰æˆ‘ä½ çš„æƒ…å†µ
          <span class="emoji">ğŸ“</span>
        </h3>

        <div class="mb-3">
          <label for="budget" class="form-label">ğŸ’° ä»Šæ—¥é¢„ç®—ï¼ˆå…ƒï¼‰</label>
          <input
            type="range"
            class="form-range funny-input"
            min="0"
            max="50"
            step="1"
            id="budget"
            value="15"
          />
          <div class="budget-labels">
            <span class="budget-label">0å…ƒ</span>
            <span class="budget-label">10å…ƒ</span>
            <span class="budget-label">20å…ƒ</span>
            <span class="budget-label">30å…ƒ</span>
            <span class="budget-label">40å…ƒ</span>
            <span class="budget-label">50å…ƒ</span>
          </div>
          <p class="funny-fact">
            å½“å‰é¢„ç®—: <span id="budgetValue">15</span>å…ƒ
            <span class="emoji" id="budgetEmoji">ğŸ˜Š</span>
          </p>
        </div>

        <div class="mb-3">
          <label class="form-label">ğŸ˜Š ä»Šå¤©å¿ƒæƒ…å¦‚ä½•ï¼Ÿ</label>
          <div class="mood-selector text-center">
            <!-- ä½¿ç”¨å®Œæ•´çš„Emoji Unicodeå­—ç¬¦æ›¿ä»£SVGé“¾æ¥ -->
            <div class="d-inline-block">
              <span class="emoji" data-mood="sad" style="font-size: 3rem; cursor: pointer;">ğŸ˜¢</span>
              <div class="text-center">éš¾è¿‡</div>
            </div>
            <div class="d-inline-block">
              <span class="emoji" data-mood="depressed" style="font-size: 3rem; cursor: pointer;">ğŸ˜”</span>
              <div class="text-center">æŠ‘éƒ</div>
            </div>
            <div class="d-inline-block">
              <span class="emoji" data-mood="normal" style="font-size: 3rem; cursor: pointer;">ğŸ˜</span>
              <div class="text-center">ä¸€èˆ¬</div>
            </div>
            <div class="d-inline-block">
              <span class="emoji" data-mood="happy" style="font-size: 3rem; cursor: pointer;">ğŸ˜Š</span>
              <div class="text-center">å¼€å¿ƒ</div>
            </div>
            <div class="d-inline-block">
              <span class="emoji" data-mood="excited" style="font-size: 3rem; cursor: pointer;">ğŸ˜</span>
              <div class="text-center">å…´å¥‹</div>
            </div>
          </div>
          <div id="selectedMood">
            å½“å‰å¿ƒæƒ…: <span id="moodText">ä¸€èˆ¬</span> <span id="moodEmoji">ğŸ˜</span>
          </div>
          <input type="hidden" id="mood" value="normal" />
        </div>

        <div class="mb-3">
          <label for="weather" class="form-label">â˜€ï¸ ä»Šå¤©å¤©æ°”</label>
          <select class="form-select funny-input" id="weather">
            <option value="sunny">é˜³å…‰æ˜åªš</option>
            <option value="cloudy">å¤šäº‘è½¬æ™´</option>
            <option value="rainy">é˜´é›¨ç»µç»µ</option>
            <option value="hot">çƒ­åˆ°èåŒ–</option>
            <option value="cold">å†·åˆ°å‘æŠ–</option>
            <option value="windy">ç‹‚é£å¤§ä½œ</option>
          </select>
        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <label for="lastClass" class="form-label">ğŸ“š ä¸Šä¸€èŠ‚è¯¾</label>
            <select class="form-select funny-input" id="lastClass">
              <option value="none">æ²¡æœ‰è¯¾</option>
              <option value="math">é«˜æ•°/çº¿ä»£</option>
              <option value="physics">å¤§å­¦ç‰©ç†</option>
              <option value="programming">ç¼–ç¨‹è¯¾</option>
              <option value="english">è‹±è¯­è¯¾</option>
              <option value="philosophy">é©¬åŸ/æ¯›æ¦‚</option>
              <option value="experiment">å®éªŒè¯¾</option>
              <option value="pe">ä½“è‚²è¯¾</option>
            </select>
          </div>
          <div class="col-md-6">
            <label for="nextClass" class="form-label">ğŸ“– ä¸‹ä¸€èŠ‚è¯¾</label>
            <select class="form-select funny-input" id="nextClass">
              <option value="none">æ²¡æœ‰è¯¾</option>
              <option value="math">é«˜æ•°/çº¿ä»£</option>
              <option value="physics">å¤§å­¦ç‰©ç†</option>
              <option value="programming">ç¼–ç¨‹è¯¾</option>
              <option value="english">è‹±è¯­è¯¾</option>
              <option value="philosophy">é©¬åŸ/æ¯›æ¦‚</option>
              <option value="experiment">å®éªŒè¯¾</option>
              <option value="pe">ä½“è‚²è¯¾</option>
            </select>
          </div>
        </div>

        <div class="mb-3">
          <label for="hunger" class="form-label">ğŸ½ï¸ é¥¥é¥¿ç¨‹åº¦</label>
          <input
            type="range"
            class="form-range funny-input"
            min="1"
            max="10"
            id="hunger"
            value="5"
          />
          <div class="d-flex justify-content-between hunger-labels">
            <span>10</span>
            <span>9</span>
            <span>8</span>
            <span>7</span>
            <span>6</span>
            <span>5</span>
            <span>4</span>
            <span>3</span>
            <span>2</span>
            <span>1</span>
          </div>
          <div class="d-flex justify-content-between hunger-text">
            <small>é¥¿åˆ°å‡å¤©</small>
            <small>èƒ½åƒä¸€å¤´ç‰›</small>
            <small>æ­£å¸¸é¥¥é¥¿</small>
            <small>ä¸å¤ªé¥¿</small>
            <small>å®Œå…¨ä¸é¥¿</small>
          </div>
          <p class="funny-fact mt-2">
            å½“å‰çŠ¶æ€: <span id="hungerStatus">æ­£å¸¸é¥¥é¥¿</span>
            <span id="hungerEmoji">ğŸ˜‹</span>
          </p>
        </div>

        <div class="mb-3">
          <label for="energy" class="form-label">âš¡ èƒ½é‡éœ€æ±‚</label>
          <input
            type="range"
            class="form-range funny-input"
            min="1"
            max="10"
            id="energy"
            value="5"
          />
          <div class="d-flex justify-content-between">
            <span>åªæƒ³èººå¹³</span>
            <span>éœ€è¦æç¥</span>
            <span>æ­£å¸¸éœ€æ±‚</span>
            <span>æ´»åŠ›æ»¡æ»¡</span>
            <span>å‡†å¤‡è·‘é©¬æ‹‰æ¾</span>
          </div>
          <p id="energyStatus">
            å½“å‰éœ€æ±‚: <span id="energyText">æ­£å¸¸éœ€æ±‚</span>
          </p>
        </div>

        <div class="mb-3">
          <label for="special" class="form-label">ğŸ¯ ç‰¹æ®Šéœ€æ±‚</label>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value="vegetarian"
              id="vegetarian"
            />
            <label class="form-check-label" for="vegetarian"
              >æˆ‘æ˜¯ç´ é£Ÿä¸»ä¹‰è€…</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value="spicy"
              id="spicy"
            />
            <label class="form-check-label" for="spicy">æˆ‘æƒ³åƒè¾£çš„</label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value="quick"
              id="quick"
            />
            <label class="form-check-label" for="quick">æˆ‘è¦å¿«é€Ÿè§£å†³</label>
          </div>
        </div>

        <div class="text-center mt-4">
          <button id="generateBtn" class="btn funny-btn">
            <span class="emoji">âœ¨</span> ç”Ÿæˆæˆ‘çš„ä¸“å±ç¾é£Ÿ
            <span class="emoji">ğŸ½ï¸</span>
          </button>
        </div>
      </div>

      <div class="progress-container" id="progressContainer">
        <div class="progress">
          <div
            id="progressBar"
            class="progress-bar progress-bar-striped progress-bar-animated"
            role="progressbar"
            style="width: 0%"
          ></div>
        </div>
        <p class="text-center mt-2" id="progressText">
          æ­£åœ¨åˆ†æä½ çš„é€‰æ‹©å›°éš¾ç—‡ç¨‹åº¦...
        </p>
      </div>

      <div class="result-container" id="resultContainer">
        <h3 class="result-title text-center">
          <span class="emoji">ğŸ‰</span> ä½ çš„ä¸“å±ç¾é£Ÿæ¨è
          <span class="emoji">ğŸ´</span>
        </h3>
        <div class="text-center">
          <p class="result-food" id="resultFood">é»„ç„–é¸¡ç±³é¥­</p>
          <p id="resultReason" class="funny-fact">
            æ ¹æ®ä½ çš„é¢„ç®—15å…ƒã€å¿ƒæƒ…ä¸€èˆ¬å’Œå¤©æ°”é˜³å…‰æ˜åªšï¼Œè¿™é“èœæœ€é€‚åˆä½ ï¼
          </p>
          <p class="funny-fact">
            <span class="result-tip">å°è´´å£«ï¼š</span>
            <span class="result-tip-content" id="resultTip"
              >è®°å¾—åŠ ä»½ç±³é¥­ï¼Œä¸ç„¶ä¼šé¥¿ï¼</span
            >
          </p>
          <button id="tryAgainBtn" class="btn funny-btn mt-3">
            <span class="emoji">ğŸ”„</span> å†è¯•ä¸€æ¬¡ <span class="emoji">ğŸ¤ª</span>
          </button>
        </div>
      </div>
    </div>

    <script>
      // é¢„ç®—æ»‘å—äº‹ä»¶
      document.getElementById("budget").addEventListener("input", function () {
        updateBudgetDisplay(this.value);
      });

      // æ›´æ–°é¢„ç®—æ˜¾ç¤ºçš„å‡½æ•°
      function updateBudgetDisplay(budget) {
        document.getElementById("budgetValue").textContent = budget;

        // æ ¹æ®é¢„ç®—æ”¹å˜è¡¨æƒ…
        let emoji = "ğŸ˜Š";
        if (budget < 5) emoji = "ğŸ˜±";
        else if (budget < 10) emoji = "ğŸ˜…";
        else if (budget > 30) emoji = "ğŸ’°";
        else if (budget > 40) emoji = "ğŸ¤‘";

        document.getElementById("budgetEmoji").textContent = emoji;
      }

      // å¿ƒæƒ…é€‰æ‹©å™¨äº‹ä»¶
      const moodEmojis = document.querySelectorAll('.mood-selector .emoji');
      const moodMap = {
        'sad': { text: 'éš¾è¿‡', emoji: 'ğŸ˜¢' },
        'depressed': { text: 'æŠ‘éƒ', emoji: 'ğŸ˜”' },
        'normal': { text: 'ä¸€èˆ¬', emoji: 'ğŸ˜' },
        'happy': { text: 'å¼€å¿ƒ', emoji: 'ğŸ˜Š' },
        'excited': { text: 'å…´å¥‹', emoji: 'ğŸ˜' }
      };
      
      moodEmojis.forEach((emoji) => {
        emoji.addEventListener('click', function() {
          // ç§»é™¤æ‰€æœ‰é€‰ä¸­çŠ¶æ€
          moodEmojis.forEach(e => e.style.color = '');
          moodEmojis.forEach(e => e.style.transform = '');
          
          // æ·»åŠ é€‰ä¸­çŠ¶æ€
          this.style.color = '#ff69b4'; // äº®ç²‰è‰²
          this.style.transform = 'scale(1.2)';
          
          // æ›´æ–°éšè—å­—æ®µçš„å€¼
          document.getElementById('mood').value = this.dataset.mood;
          
          // æ›´æ–°æ˜¾ç¤ºçš„å¿ƒæƒ…
          const mood = this.dataset.mood;
          document.getElementById('moodText').textContent = moodMap[mood].text;
          document.getElementById('moodEmoji').textContent = moodMap[mood].emoji;
        });
      });

      // é»˜è®¤é€‰æ‹©"ä¸€èˆ¬"å¿ƒæƒ…
      moodEmojis[2].style.color = '#ff69b4';
      moodEmojis[2].style.transform = 'scale(1.2)';

      // é¥¥é¥¿ç¨‹åº¦æ»‘å—äº‹ä»¶
      document.getElementById("hunger").addEventListener("input", function () {
        const hunger = parseInt(this.value);
        let status = "";
        let emoji = "";

        if (hunger === 1) {
          status = "é¥¿åˆ°å‡å¤©";
          emoji = "ğŸ˜«";
        } else if (hunger <= 3) {
          status = "èƒ½åƒä¸€å¤´ç‰›";
          emoji = "ğŸ®";
        } else if (hunger <= 5) {
          status = "æœ‰ç‚¹é¥¿";
          emoji = "ğŸ˜‹";
        } else if (hunger <= 7) {
          status = "æ­£å¸¸é¥¥é¥¿";
          emoji = "ğŸ¤¤";
        } else if (hunger <= 9) {
          status = "ä¸å¤ªé¥¿";
          emoji = "ğŸ¤”";
        } else {
          status = "å®Œå…¨ä¸é¥¿";
          emoji = "ğŸ˜Œ";
        }

        document.getElementById("hungerStatus").textContent = status;
        document.getElementById("hungerEmoji").textContent = emoji;
      });

      // èƒ½é‡éœ€æ±‚æ»‘å—äº‹ä»¶
      document.getElementById("energy").addEventListener("input", function () {
        const energy = parseInt(this.value);
        let status = "";

        if (energy <= 2) {
          status = "åªæƒ³èººå¹³";
        } else if (energy <= 4) {
          status = "éœ€è¦æç¥";
        } else if (energy <= 6) {
          status = "æ­£å¸¸éœ€æ±‚";
        } else if (energy <= 8) {
          status = "æ´»åŠ›æ»¡æ»¡";
        } else {
          status = "å‡†å¤‡è·‘é©¬æ‹‰æ¾";
        }

        document.getElementById("energyText").textContent = status;
      });

      // æœ¬åœ°é£Ÿç‰©æ¨èæ•°æ®åº“
      const foodDatabase = [
        { name: "é»„ç„–é¸¡ç±³é¥­", budget: 15, mood: "normal", weather: "sunny", vegetarian: false, spicy: false, quick: true,
          reason: "è¥å…»å‡è¡¡çš„é»„ç„–é¸¡ç±³é¥­ï¼Œæ­é…è½¯ç³¯çš„ç±³é¥­ï¼Œæ—¢ç»æµå®æƒ åˆèƒ½è®©äººå¿ƒæƒ…æ„‰æ‚¦ï¼" },
        { name: "å…°å·æ‹‰é¢", budget: 16, mood: "normal", weather: "cloudy", vegetarian: false, spicy: true, quick: true,
          reason: "æ¸…çˆ½çš„æ±¤åº•é…ä¸ŠåŠ²é“çš„é¢æ¡ï¼Œè®©ä½ åœ¨å¤šäº‘çš„å¤©æ°”é‡Œä¹Ÿèƒ½ä¸€æ‰«é˜´éœ¾~" },
        { name: "éº»è¾£é¦™é”…", budget: 25, mood: "depressed", weather: "cold", vegetarian: false, spicy: true, quick: false,
          reason: "è¾£æ¤’çš„åˆºæ¿€èƒ½è®©ä½ å¿˜è®°çƒ¦æ¼ï¼Œéº»è¾£é¦™é”…æ˜¯èµ¶èµ°å¿§éƒçš„æœ€ä½³é€‰æ‹©ï¼" },
        { name: "æ²™å¿å°åƒ", budget: 10, mood: "normal", weather: "any", vegetarian: false, spicy: false, quick: true,
          reason: "ç»æµå®æƒ çš„æ²™å¿å¥—é¤ï¼Œè§£å†³ä½ çš„æ¸©é¥±é—®é¢˜ï¼Œå­¦ç”Ÿå…šå¿…å¤‡é€‰æ‹©ï¼" },
        { name: "è‡ªé€‰å¿«é¤", budget: 15, mood: "excited", weather: "any", vegetarian: false, spicy: false, quick: true,
          reason: "æ—¢ç»æµåˆèƒ½æ»¡è¶³ä½ ä¸ªæ€§åŒ–çš„é€‰æ‹©ï¼Œæƒ³åƒä»€ä¹ˆæ‹¿ä»€ä¹ˆï¼Œè‡ªç”±æ­é…è¶…å¼€å¿ƒï¼" },
        { name: "éº¦å½“åŠ³", budget: 30, mood: "happy", weather: "any", vegetarian: false, spicy: false, quick: true,
          reason: "å¿ƒæƒ…å¥½çš„æ—¶å€™æ¥ä¸€ä»½éº¦ä¹é¤ï¼Œç»™è‡ªå·±å°å°çš„å¥–åŠ±ï¼" },
        { name: "é‡åº†å°é¢", budget: 12, mood: "any", weather: "rainy", vegetarian: false, spicy: true, quick: true,
          reason: "é›¨å¤©æ¥ç¢—çƒ­è…¾è…¾çš„å°é¢ï¼Œå¾®è¾£çš„å£æ„Ÿè®©äººæš–å’Œèˆ’é€‚~" },
        { name: "ç‚’ç±³ç²‰", budget: 12, mood: "normal", weather: "any", vegetarian: true, spicy: false, quick: true,
          reason: "ç´ é£Ÿå‹å¥½çš„é€‰æ‹©ï¼Œç®€å•å¿«æ·åˆèƒ½å¡«é¥±è‚šå­ï¼" },
        { name: "è‚¯å¾·åŸº", budget: 35, mood: "excited", weather: "any", vegetarian: false, spicy: false, quick: true,
          reason: "ç‚¸é¸¡é…å¯ä¹ï¼Œå¼€å¿ƒå¾—ä¸å¾—äº†ï¼å¤§å‰å¤§åˆ©ï¼Œä»Šæ™šåƒé¸¡ï¼" },
        { name: "éº»è¾£çƒ«", budget: 18, mood: "sad", weather: "cold", vegetarian: false, spicy: true, quick: true,
          reason: "è¾£è¾£çš„æ±¤åº•å’Œä¸°å¯Œçš„é…èœï¼Œé©±æ•£å¿ƒæƒ…çš„é˜´éœ¾ï¼Œè®©ä½ å…ƒæ°”æ»¡æ»¡ï¼" },
        { name: "é…¸èœé±¼", budget: 28, mood: "normal", weather: "rainy", vegetarian: false, spicy: true, quick: false,
          reason: "é…¸çˆ½çš„å£æ„ŸåŠ ä¸Šé±¼è‚‰çš„é²œç¾ï¼Œé›¨å¤©çš„ç»ä½³é€‰æ‹©ï¼" },
        { name: "æ°´æœæ²™æ‹‰", budget: 15, mood: "happy", weather: "hot", vegetarian: true, spicy: false, quick: true,
          reason: "ç‚çƒ­å¤©æ°”æ¥ä»½æ¸…çˆ½çš„æ°´æœæ²™æ‹‰ï¼Œè¡¥å……ç»´ç”Ÿç´ åˆèƒ½è§£æš‘ï¼" },
        { name: "ç«é”…", budget: 40, mood: "excited", weather: "cold", vegetarian: false, spicy: true, quick: false,
          reason: "çº¦ä¸Šä¸‰äº”å¥½å‹ï¼Œä¸€èµ·åƒç«é”…ï¼Œå†¬å¤©é‡Œçš„æš–å¿ƒé€‰æ‹©ï¼" },
        { name: "ç‚¸é…±é¢", budget: 13, mood: "normal", weather: "any", vegetarian: false, spicy: false, quick: true,
          reason: "é…±é¦™æµ“éƒçš„ç‚¸é…±é…ä¸Šç­‹é“çš„é¢æ¡ï¼Œç®€å•ç¾å‘³åˆå®æƒ ï¼" },
        { name: "å‡‰çš®", budget: 8, mood: "any", weather: "hot", vegetarian: true, spicy: false, quick: true,
          reason: "é…¸è¾£çˆ½å£çš„å‡‰çš®ï¼Œç‚çƒ­å¤©æ°”çš„è§£æš‘è‰¯å“ï¼" },
        { name: "çƒ¤å†·é¢", budget: 10, mood: "normal", weather: "hot", vegetarian: false, spicy: false, quick: true,
          reason: "å†·é¢çš„ç­‹é“é…ä¸Šç”œè¾£çš„é…±æ–™ï¼Œå¤å¤©é‡Œçš„ç»ä½³é€‰æ‹©ï¼" },
        { name: "çƒ¤è‚‰é¥­", budget: 20, mood: "happy", weather: "any", vegetarian: false, spicy: false, quick: true,
          reason: "é¦™å–·å–·çš„çƒ¤è‚‰é…ä¸Šè½¯ç³¯çš„ç±³é¥­ï¼Œæ¯ä¸€å£éƒ½æ˜¯æ»¡è¶³ï¼" },
        { name: "é¦„é¥¨", budget: 12, mood: "depressed", weather: "cold", vegetarian: false, spicy: false, quick: true,
          reason: "è½»è½»ä¸€å£ï¼Œçƒ­è…¾è…¾çš„é¦„é¥¨æ±¤æ»‘å…¥å–‰å’™ï¼Œæ¸©æš–ä½ çš„å¿ƒæƒ…~" },
        { name: "ç‰›è‚‰é¢", budget: 18, mood: "normal", weather: "windy", vegetarian: false, spicy: false, quick: true,
          reason: "å¤§é£å¤©æ¥ä¸€ç¢—çƒ­æ°”è…¾è…¾çš„ç‰›è‚‰é¢ï¼Œæš–èƒƒåˆæš–å¿ƒï¼" },
        { name: "çŒªè„šé¥­", budget: 20, mood: "any", weather: "cold", vegetarian: false, spicy: false, quick: false,
          reason: "çƒ­é‡æ»¡æ»¡çš„çŒªè„šé¥­ï¼Œå†·å¤©é‡Œè¡¥å……èƒ½é‡çš„ä¸äºŒä¹‹é€‰ï¼" }
      ];

      // æœ¬åœ°é£Ÿç‰©å°è´´å£«æ•°æ®åº“
      const foodTips = [
        "åˆ«å¿˜äº†ç‚¹ä¸€ä»½å°èœå¢åŠ è¥å…»å‡è¡¡ï¼",
        "åƒå®Œé¥­åˆ«å¿˜äº†é€‚å½“æ´»åŠ¨æ¶ˆåŒ–ä¸€ä¸‹å“¦~",
        "è®°å¾—å¤šå–æ°´ï¼Œä¿æŒæ°´åˆ†æ‘„å…¥å¾ˆé‡è¦ï¼",
        "é¥­åæ°´æœæ˜¯æœ€ä½³çš„é¥­åç”œç‚¹~",
        "åƒçš„å¤ªå¿«å®¹æ˜“æ¶ˆåŒ–ä¸è‰¯ï¼Œæ…¢æ…¢å“å°å§ï¼",
        "å¦‚æœä¸‹ä¸€èŠ‚æœ‰é‡è¦è¯¾ç¨‹ï¼Œæ³¨æ„ä¸è¦åƒå¾—å¤ªé¥±å“¦~",
        "æ˜å¤©è€ƒè¯•ï¼Ÿé€‰æ‹©å®¹æ˜“æ¶ˆåŒ–çš„é£Ÿç‰©æ›´æœ‰åŠ©äºé›†ä¸­æ³¨æ„åŠ›ï¼",
        "å¶å°”æ”¹å˜ä¸€ä¸‹å£å‘³ï¼Œå°è¯•æ–°çš„ç¾é£Ÿä¹Ÿæ˜¯ä¸€ç§ä¹è¶£~",
        "è®°å¾—éšèº«æºå¸¦é¤å·¾çº¸ï¼Œä¿æŒç”¨é¤ç¤¼ä»ªï¼",
        "åƒé¥­æ—¶è¿œç¦»æ‰‹æœºï¼Œä¸“å¿ƒäº«å—ç¾é£Ÿçš„æ—¶åˆ»~",
        "ç»“ä¼´åŒè¡Œï¼Œåˆ†äº«ä¸åŒçš„ç¾é£Ÿï¼Œå¢åŠ ç¤¾äº¤ä¹è¶£ï¼",
        "é¥­åå°æ†©15åˆ†é’Ÿï¼Œæœ‰åŠ©äºæ¶ˆåŒ–å¸æ”¶~",
        "åŠ è¾£è¦é€‚é‡ï¼Œä¿æŠ¤è‚ èƒƒå¥åº·å¾ˆé‡è¦ï¼"
      ];

      // ç”ŸæˆæŒ‰é’®äº‹ä»¶
      document
        .getElementById("generateBtn")
        .addEventListener("click", function () {
          // ç¡®ä¿è·å–æœ€æ–°çš„è¡¨å•å€¼
          const currentBudget = document.getElementById("budget").value;
          updateBudgetDisplay(currentBudget);

          // æ˜¾ç¤ºè¿›åº¦æ¡
          document.getElementById("progressContainer").style.display = "block";
          document.querySelector(".form-container").style.display = "none";

          // æ¨¡æ‹Ÿè¿›åº¦æ¡
          let progress = 0;
          const progressBar = document.getElementById("progressBar");
          const progressText = document.getElementById("progressText");
          const interval = setInterval(() => {
            progress += Math.random() * 10;
            if (progress > 100) progress = 100;
            progressBar.style.width = progress + "%";

            // æ›´æ–°è¿›åº¦æ–‡æœ¬
            if (progress < 30) {
              progressText.textContent = "æ­£åœ¨åˆ†æä½ çš„é€‰æ‹©å›°éš¾ç—‡ç¨‹åº¦...";
            } else if (progress < 60) {
              progressText.textContent = "æ­£åœ¨è®¡ç®—é£Ÿå ‚æ’é˜Ÿæ—¶é—´...";
            } else if (progress < 90) {
              progressText.textContent = "æ­£åœ¨è€ƒè™‘å®¿ç®¡é˜¿å§¨çš„è„¸è‰²...";
            } else {
              progressText.textContent = "å·®ç‚¹è¢«å¤–å–å°å“¥æ‰“æ–­...";
            }

            if (progress === 100) {
              clearInterval(interval);
              setTimeout(() => {
                generateLocalRecommendation();
              }, 500);
            }
          }, 200);
        });

      // æœ¬åœ°ç”Ÿæˆé£Ÿç‰©æ¨è
      function generateLocalRecommendation() {
        // æ”¶é›†è¡¨å•æ•°æ®
        const formData = {
          budget: parseInt(document.getElementById("budget").value),
          mood: document.getElementById("mood").value,
          weather: document.getElementById("weather").value,
          lastClass: document.getElementById("lastClass").value,
          nextClass: document.getElementById("nextClass").value,
          hunger: parseInt(document.getElementById("hunger").value),
          energy: parseInt(document.getElementById("energy").value),
          vegetarian: document.getElementById("vegetarian").checked,
          spicy: document.getElementById("spicy").checked,
          quick: document.getElementById("quick").checked,
        };

        // è®¡ç®—æ¯ä¸ªé£Ÿç‰©çš„åŒ¹é…åˆ†æ•°
        const scoredFoods = foodDatabase.map(food => {
          let score = 0;
          
          // é¢„ç®—åŒ¹é…ç¨‹åº¦
          if (food.budget <= formData.budget) {
            score += 10 - Math.abs(food.budget - formData.budget) / 5;
          } else {
            score -= 5;  // è¶…å‡ºé¢„ç®—æ‰£åˆ†
          }
          
          // å¿ƒæƒ…åŒ¹é…
          if (food.mood === formData.mood || food.mood === "any") {
            score += 8;
          } else if (
            (formData.mood === "happy" || formData.mood === "excited") && 
            (food.mood === "happy" || food.mood === "excited")
          ) {
            score += 5;
          }
          
          // å¤©æ°”åŒ¹é…
          if (food.weather === formData.weather || food.weather === "any") {
            score += 6;
          } else if (
            (formData.weather === "cold" || formData.weather === "rainy") && 
            (food.weather === "cold" || food.weather === "rainy")
          ) {
            score += 3;
          }
          
          // ç´ é£ŸåŒ¹é…
          if (formData.vegetarian && !food.vegetarian) {
            score -= 20;  // ç´ é£Ÿéœ€æ±‚ä½†é£Ÿç‰©ä¸æ˜¯ç´ é£Ÿï¼Œå¤§å¹…æ‰£åˆ†
          } else if (formData.vegetarian && food.vegetarian) {
            score += 10;  // ç´ é£Ÿéœ€æ±‚ä¸”é£Ÿç‰©æ˜¯ç´ é£Ÿï¼ŒåŠ åˆ†
          }
          
          // è¾£å‘³åŒ¹é…
          if (formData.spicy && food.spicy) {
            score += 8;  // æƒ³åƒè¾£ä¸”é£Ÿç‰©æ˜¯è¾£çš„ï¼ŒåŠ åˆ†
          } else if (formData.spicy && !food.spicy) {
            score -= 5;  // æƒ³åƒè¾£ä½†é£Ÿç‰©ä¸è¾£ï¼Œæ‰£åˆ†
          }
          
          // é€Ÿåº¦åŒ¹é…
          if (formData.quick && food.quick) {
            score += 7;  // éœ€è¦å¿«é€Ÿä¸”é£Ÿç‰©é€Ÿåº¦å¿«ï¼ŒåŠ åˆ†
          } else if (formData.quick && !food.quick) {
            score -= 10;  // éœ€è¦å¿«é€Ÿä½†é£Ÿç‰©ä¸å¿«ï¼Œå¤§å¹…æ‰£åˆ†
          }
          
          // é¥¥é¥¿ç¨‹åº¦å¯¹åˆ†æ•°çš„å½±å“
          if (formData.hunger <= 3 && food.budget >= 20) {
            score += 5;  // å¾ˆé¥¿ä¸”ä»·æ ¼è¾ƒé«˜çš„é£Ÿç‰©åŠ åˆ†
          } else if (formData.hunger >= 8 && food.budget <= 12) {
            score += 3;  // ä¸å¤ªé¥¿ä¸”ä»·æ ¼è¾ƒä½çš„é£Ÿç‰©åŠ åˆ†
          }
          
          return { ...food, score };
        });
        
        // æ’åºå¹¶é€‰å‡ºæœ€åŒ¹é…çš„é£Ÿç‰©
        scoredFoods.sort((a, b) => b.score - a.score);
        const recommendation = scoredFoods[0];
        
        // éšæœºé€‰æ‹©ä¸€ä¸ªå°è´´å£«
        const randomTip = foodTips[Math.floor(Math.random() * foodTips.length)];
        
        // æ„å»ºåŸå› è¯´æ˜
        let reason = recommendation.reason;
        if (formData.budget < recommendation.budget) {
          reason += " ä½†å¯èƒ½ç•¥è¶…å‡ºä½ çš„é¢„ç®—ï¼Œè€ƒè™‘é€‚å½“å¢åŠ ä¸€ç‚¹é¢„ç®—æˆ–é€‰æ‹©æ›´ç»æµçš„ç‰ˆæœ¬ã€‚";
        }
        
        // è€ƒè™‘è¯¾ç¨‹å¯¹æ¨èçš„å½±å“
        if (formData.nextClass === "pe" && formData.budget >= 15) {
          reason += " ä¸è¿‡ä¸‹èŠ‚æ˜¯ä½“è‚²è¯¾ï¼Œå»ºè®®åƒå¾—ä¸è¦å¤ªé¥±å“¦ï¼";
        } else if (formData.lastClass === "pe" && formData.hunger <= 3) {
          reason += " åˆšä¸Šå®Œä½“è‚²è¯¾ä¸€å®šå¾ˆé¥¿ï¼Œè¿™ä¸ªé€‰æ‹©èƒ½å¤Ÿå¾ˆå¥½åœ°è¡¥å……ä½“åŠ›ï¼";
        }
        
        // æ˜¾ç¤ºæ¨èç»“æœ
        showResult({
          food: recommendation.name,
          reason: reason,
          tip: randomTip
        });
      }

      // æ˜¾ç¤ºç»“æœ
      function showResult(data) {
        document.getElementById("progressContainer").style.display = "none";
        document.getElementById("resultContainer").style.display = "block";

        // æ˜¾ç¤ºç»“æœ
        document.getElementById("resultFood").textContent = data.food;
        document.getElementById("resultReason").textContent = data.reason;
        document.getElementById("resultTip").textContent = data.tip;
      }

      // å†è¯•ä¸€æ¬¡æŒ‰é’®
      document
        .getElementById("tryAgainBtn")
        .addEventListener("click", function () {
          // éšè—ç»“æœå®¹å™¨
          document.getElementById("resultContainer").style.display = "none";
          // æ˜¾ç¤ºè¡¨å•å®¹å™¨
          document.querySelector(".form-container").style.display = "block";

          // ç¡®ä¿é¢„ç®—æ˜¾ç¤ºæ›´æ–°
          const currentBudget = document.getElementById("budget").value;
          updateBudgetDisplay(currentBudget);
        });

      // åˆå§‹åŒ–é¢„ç®—æ˜¾ç¤º
      updateBudgetDisplay(document.getElementById("budget").value);
      
      // åˆå§‹åŒ–èƒ½é‡éœ€æ±‚æ˜¾ç¤º
      document.getElementById("energyText").textContent = "æ­£å¸¸éœ€æ±‚";
    </script>
  </body>
</html>